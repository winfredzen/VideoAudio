# 推流FLV



## pkg-config

我的电脑上显示已安装pkg-config，查看pkg-config `which pkg-config`，显示的路径如下：

```shell
/usr/local/bin/pkg-config
```

运行命令`pkg-config --libs --cflags librtmp`

显示结果如下：

![112](https://github.com/winfredzen/VideoAudio/blob/main/Basic/image/112.png)

```
Package libssl was not found in the pkg-config search path.
Perhaps you should add the directory containing `libssl.pc'
to the PKG_CONFIG_PATH environment variable
Package 'libssl', required by 'librtmp', not found
```



解决的步骤：

1.安装openssl，rtmpdump

先搜索`brew search openssl` `brew search rtmpdump`

之后安装

```shell
brew install openssl@1.1
brew install rtmpdump
```

2.brew安装lib的路劲一般是`/usr/local/Cellar/`

3.通过`pkg-config --list-all`列出所有的路径，看是否包含`openssl`

如果不包含，则参考：

+ [macOS 解决 No package 'openssl' found 错误](https://segmentfault.com/a/1190000040421959)

+ [关于编译安装提示No package ** found时可能需配置pkg-config](https://blog.csdn.net/lsg9012/article/details/106117895)



将 `*.pc` 文件软链到 pkgconfig目录`/usr/local/lib/pkgconfig` 下

```shell
ln -s /usr/local/Cellar/openssl@1.1/1.1.1k/lib/pkgconfig/libcrypto.pc /usr/local/lib/pkgconfig
ln -s /usr/local/Cellar/openssl@1.1/1.1.1k/lib/pkgconfig/libssl.pc /usr/local/lib/pkgconfig
ln -s /usr/local/Cellar/openssl@1.1/1.1.1k/lib/pkgconfig/openssl.pc /usr/local/lib/pkgconfig
```

4.再`pkg-config --list-all`列出所有的路径，看是否包含`openssl`



此时，再`pkg-config --libs --cflags librtmp`，效果如下：

![113](https://github.com/winfredzen/VideoAudio/blob/main/Basic/image/113.png)

```shell
-I/usr/local/Cellar/rtmpdump/2.4+20151223_1/include -I/usr/local/Cellar/openssl@1.1/1.1.1k/include -L/usr/local/Cellar/rtmpdump/2.4+20151223_1/lib -L/usr/local/Cellar/openssl@1.1/1.1.1k/lib -lrtmp -lz -lssl -lcrypto
```



## FLV

1.添加库文件和头文件

![114](https://github.com/winfredzen/VideoAudio/blob/main/Basic/image/114.png)

![115](https://github.com/winfredzen/VideoAudio/blob/main/Basic/image/115.png)

















