# 音频采集

采集音频的方法

1.Android

+ AudioRecord
+ MediaRecorder

2.iOS

+ AudioUnit
+ AVFoundation



**FFmpeg采集音频**

1.通过命令的方式

2.通过API的方式



## FFmpeg中MacOS的操作

1.查看设备列表

```shell
ffmpeg -devices
```

![018](https://github.com/winfredzen/VideoAudio/blob/main/Basic/image/018.png)

包括

+ 解封装或封装的支持情况
+ 设备列表



上面的输出设备中包含`avfoundation`，在FFmpeg官方文档中对[AVFoundation](https://ffmpeg.org/ffmpeg-devices.html#toc-avfoundation)有介绍

> AVFoundation input device.
>
> AVFoundation is the currently recommended framework by Apple for streamgrabbing on OSX >= 10.7 as well as on iOS.
>
> The input filename has to be given in the following syntax:
>
> ```
> -i "[[VIDEO]:[AUDIO]]"
> ```
>
> The first entry selects the video input while the latter selects the audio input. The stream has to be specified by the device name or the device index as shown by the device list. Alternatively, the video and/or audio input device can be chosen by index using the -video_device_index <INDEX> and/or -audio_device_index <INDEX> , overriding any device name or index given in the input filename.
>
> All available devices can be enumerated by using -list_devices true, listing all device names and corresponding indices.



例如`-i "[[VIDEO]:[AUDIO]]"`，第一个表示视频输入，第二个表示音频输入



枚举AVFoundation支持的输入设备

```shell
ffmpeg -f avfoundation -list_devices true -i ""
```

![019](https://github.com/winfredzen/VideoAudio/blob/main/Basic/image/019.png)



2.采集视频

参考：

+ [(FFmpeg) How to record a MacOS Screen with terminal?](http://johnriselvato.com/ffmpeg-how-to-record-macos-screen/)



如：

```shell
ffmpeg -f avfoundation -r 30 -s 1280x720 -i "0:0"  output.mkv
```





3.采集音频

```shell
ffmpeg -f avfoundation -i ":0" out.wav
```

播放

```shell
ffplay out.wav
```







 
